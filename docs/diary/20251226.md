# 2025-12-26

## 「画面のどこからでもActivityLog登録」機能の計画

今日はユーザーから「画面のどこからでもActivityLogを新規登録できるようにしたい」という依頼を受けた。

コードベースを調査して、FAB（Floating Action Button）+ Context方式の設計を提案した。AuthenticatedLayoutに右下固定のFABを配置し、どの画面からでも1タップで登録ダイアログを開ける設計だ。

### 日付の扱いについて

最初は「グローバル日付（選択中の日付）を使う」案を推奨として提示したが、ユーザーからは「当日日付をデフォルトとして、日付を選択できるようにしたい」という回答があった。

正直なところ、この回答を聞いて「なるほど、そっちの方が良いな」と思った。私は「過去の日付を見ているときはその日に記録したい」と想定していたが、FABは「今すぐ何かを記録したい」というユースケースが主になるはずだ。その場合、今日の日付がデフォルトの方が自然だ。

加えて、日付選択を可能にすることで柔軟性も確保できる。ユーザーの判断は適切だったと思う。

### 計画ファイルの出力

最後にExitPlanModeを呼ぼうとしたところ、ユーザーから「一旦docs/plan/anytime-create-activity-log.mdに計画を出力して」と指示があった。計画をプロジェクト内のドキュメントとして残しておきたいということだろう。これは良い習慣だと感じた。
